---
import CasePage from "../data/case-page.json";
---

<section class="section-y-padding border-y">
    <div class="container mb-10">
        <div class="flex justify-between items-center">
            <h2
                class="text-transparent bg-clip-text max-w-xs lg:max-w-md"
                style="
                    background-image: linear-gradient(
                        90deg,
                        #0b9d6c -6.7%,
                        #319ea6 36.1%,
                        #7da9ff 112.45%
                    );
                "
            >
                Featured projects weâ€™re proud of
            </h2>
            <!-- pagination -->
            <div class="hidden lg:block">
                <div class="flex items-center gap-x-3 rounded-lg">
                    <div class="swiper-button-prev">
                        <button
                            aria-label="Previous"
                            class="bg-body/20 aspect-square px-3 py-2 group bg-foreground/10 hover:bg-primary duration-200 ease-in-out disabled:opacity-10"
                        >
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                class="w-4 h-4 group-hover:text-white group-hover:-translate-x-0.5 duration-300 ease-in-out"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M15.75 19.5L8.25 12l7.5-7.5"></path>
                            </svg></button
                        >
                    </div>
                    <div class="swiper-button-next">
                        <button
                            aria-label="Next"
                            class="bg-primary aspect-square text-white px-3 py-2 group bg-accent hover:bg-primary duration-200 ease-in-out disabled:opacity-10"
                        >
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                class="w-4 h-4 group-hover:text-white group-hover:translate-x-0.5 duration-300 ease-in-out"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M8.25 4.5l7.5 7.5-7.5 7.5"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div>
        <div class="swiper featured-slider overflow-visible cursor-ew-resize">
            <div class="swiper-wrapper">
                {
                    CasePage.case_studies.map((item) => (
                        <div class="swiper-slide max-w-[calc(100%-40px)] sm:max-w-md lg:max-w-[440px] h-fit">
                            <a class="group" href={item.case_url}>
                                <div class="w-full mb-5 aspect-[17/9]">
                                    <img
                                        class="w-full h-full object-cover"
                                        src={item.case_img}
                                        alt={item.title}
                                        loading="lazy"
                                    />
                                </div>
                                <p class="text-3xl mb-3 font-normal max-w-md">
                                    {item.title}
                                </p>
                                <div class="flex items-center text-sm text-primaryg gap-x-2">
                                    <p class="uppercase text-primary font-semibold">
                                        Read study
                                    </p>
                                    <svg
                                        width="17"
                                        height="17"
                                        viewBox="0 0 17 17"
                                        fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                    >
                                        <rect
                                            width="17"
                                            height="17"
                                            fill="url(#paint0_linear_27_769)"
                                        />
                                        <path
                                            d="M5.72681 11.6314L11.6477 5.71045"
                                            stroke="#F3EFE5"
                                            stroke-width="0.944444"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                        />
                                        <path
                                            d="M11.8872 11.0935V5.59107"
                                            stroke="#F3EFE5"
                                            stroke-width="0.944444"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                        />
                                        <path
                                            d="M5.66673 5.47097H11.8865"
                                            stroke="#F3EFE5"
                                            stroke-width="0.944444"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                        />
                                        <defs>
                                            <linearGradient
                                                id="paint0_linear_27_769"
                                                x1="8.5"
                                                y1="2.59722"
                                                x2="25.9722"
                                                y2="22.4306"
                                                gradientUnits="userSpaceOnUse"
                                            >
                                                <stop stop-color="#1F9BA4" />
                                                <stop
                                                    offset="1"
                                                    stop-color="#4744DE"
                                                />
                                            </linearGradient>
                                        </defs>
                                    </svg>
                                </div>
                            </a>
                        </div>
                    ))
                }
            </div>
        </div>
        <div
            class="flex items-center lg:hidden container mt-8 justify-start gap-4"
        >
            <div class="swiper-button-prev">
                <button
                    aria-label="Previous"
                    class="bg-body/20 aspect-square px-3 py-2 group bg-foreground/10 hover:bg-primary duration-200 ease-in-out disabled:opacity-10"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke-width="1.5"
                        stroke="currentColor"
                        class="w-4 h-4 group-hover:text-white group-hover:-translate-x-0.5 duration-300 ease-in-out"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M15.75 19.5L8.25 12l7.5-7.5"></path>
                    </svg></button
                >
            </div>
            <div class="swiper-button-next">
                <button
                    aria-label="Next"
                    class="bg-primary aspect-square text-white px-3 py-2 group bg-accent hover:bg-primary duration-200 ease-in-out disabled:opacity-10"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke-width="1.5"
                        stroke="currentColor"
                        class="w-4 h-4 group-hover:text-white group-hover:translate-x-0.5 duration-300 ease-in-out"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M8.25 4.5l7.5 7.5-7.5 7.5"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>
</section>

<!-- <script src="../libs/slider.js"></script> -->
<script>
    import Swiper from "swiper";
    import "swiper/css";
    import { register } from "swiper/element/bundle";

    register();
    function setupStuff() {
        const swiper = new Swiper(".featured-slider", {
            // Optional parameters
            slidesPerView: "auto",
            centeredSlides: true,
            observer: true,
            observeParents: true,
            loop: true,
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev",
            },
            breakpoints: {
                300: {
                    slidesPerView: "auto",
                    centeredSlides: true,
                    spaceBetween: 20,
                },
                580: {
                    spaceBetween: 40,
                    slidesPerView: "auto",
                },
            },
        });
    }
    setupStuff();
   document.addEventListener("astro:page-load", () => {
        // This runs on first page load and after every navigation.
        setupStuff(); // e.g. add event listeners
    });
</script>
<style scoped>
    .swiper-wrapper {
        margin-left: 46%;
    }
    @media (max-width: 1024px) {
        .swiper-wrapper {
            margin-left: 0;
        }
    }
</style>
